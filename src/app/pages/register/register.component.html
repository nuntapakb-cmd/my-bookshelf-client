<!-- src/app/pages/register/register.component.html -->
<div class="container mt-5">
  <div class="row">
    <div class="col-md-6 col-lg-4 mx-auto">

      <h3 class="mb-4 text-center">{{ 'REGISTER_TITLE' | translate }}</h3>

      <!-- Template-driven form -->
      <form #registerForm="ngForm" (ngSubmit)="onSubmit()">

        <!-- Email (used for login) -->
        <div class="mb-3">
          <label for="email" class="form-label">{{ 'REGISTER_EMAIL' | translate }}</label>
          <input
            id="email"
            name="email"
            type="email"
            class="form-control"
            [(ngModel)]="model.email"
            required
            [placeholder]="'REGISTER_EMAIL' | translate"
          />
          <div class="text-danger small" *ngIf="registerForm.submitted && !model.email">
            {{ 'REGISTER_EMAIL_REQUIRED' | translate }}
          </div>
        </div>

        <!-- Password -->
        <div class="mb-3">
          <label for="password" class="form-label">{{ 'REGISTER_PASSWORD' | translate }}</label>

          <div class="position-relative">
            <input
              id="password"
              name="password"
              [type]="showPassword ? 'text' : 'password'"
              class="form-control"
              [(ngModel)]="model.password"
              required
              minlength="6"
              [placeholder]="'REGISTER_PASSWORD' | translate"
            />

            <!-- Eye icon for password -->
            <fa-icon
              [icon]="showPassword ? 'eye-slash' : 'eye'"
              class="position-absolute end-0 top-50 translate-middle-y pe-3"
              style="cursor:pointer;"
              (click)="togglePasswordVisibility()"
            ></fa-icon>

          </div>

          <div class="text-danger small" *ngIf="registerForm.submitted && !model.password">
            {{ 'LOGIN_PASSWORD_REQUIRED' | translate }}
          </div>
          <div class="text-danger small" *ngIf="registerForm.submitted && model.password && model.password.length < 6">
            {{ 'PASSWORD_MIN_LENGTH' | translate }}
          </div>
        </div>

        <!-- Confirm password -->
        <div class="mb-3">
          <label for="confirmPassword" class="form-label">{{ 'REGISTER_CONFIRM_PASSWORD' | translate }}</label>

          <div class="position-relative">
            <input
              id="confirmPassword"
              name="confirmPassword"
              [type]="showConfirmPassword ? 'text' : 'password'"
              class="form-control"
              [(ngModel)]="model.confirmPassword"
              required
              [placeholder]="'REGISTER_CONFIRM_PASSWORD' | translate"
            />

            <!-- Eye icon for confirm password -->
            <fa-icon
              [icon]="showConfirmPassword ? 'eye-slash' : 'eye'"
              class="position-absolute end-0 top-50 translate-middle-y pe-3"
              style="cursor:pointer;"
              (click)="toggleConfirmPasswordVisibility()"
            ></fa-icon>

          </div>

          <div class="text-danger small" *ngIf="registerForm.submitted && !model.confirmPassword">
            {{ 'CONFIRM_PASSWORD_REQUIRED' | translate }}
          </div>
          <div class="text-danger small" *ngIf="registerForm.submitted && !passwordsMatch() && model.confirmPassword">
            {{ 'PASSWORDS_NOT_MATCH' | translate }}
          </div>
        </div>

        <!-- Error from TS -->
        <div *ngIf="error" class="text-danger small mb-2">
          {{ error }}
        </div>

        <button
          type="submit"
          class="btn btn-success w-100"
          [disabled]="registerForm.invalid || !passwordsMatch() || loading"
        >
          <span *ngIf="!loading">{{ 'REGISTER_BTN' | translate }}</span>
          <span *ngIf="loading">Loading...</span>
        </button>
      </form>

      <p class="account-link mt-3 text-center">
        {{ 'REGISTER_PROMPT' | translate }}
        <a routerLink="/login" class="login-link">{{ 'LOGIN_LINK' | translate }}</a>
      </p>

    </div>
  </div>
</div>
